import{LitElement as t,html as e,property as i,internalProperty as o,customElement as s}from"lit-element";import{unsafeHTML as r}from"lit-html/directives/unsafe-html";import{connect as n,installRouter as h}from"pwa-helpers";const c=(t,e)=>{const{pattern:i,keys:o}=function(t,e){if(t instanceof RegExp)return{keys:!1,pattern:t};var i,o,s,r,n=[],h="",c=t.split("/");for(c[0]||c.shift();s=c.shift();)"*"===(i=s[0])?(n.push("wild"),h+="/(.*)"):":"===i?(o=s.indexOf("?",1),r=s.indexOf(".",1),n.push(s.substring(1,~o?o:~r?r:s.length)),h+=~o&&!~r?"(?:/([^/]+?))?":"/([^/]+?)",~r&&(h+=(~o?"?":"")+"\\"+s.substring(r))):h+="/"+s;return{keys:n,pattern:new RegExp("^"+h+(e?"(?=$|/)":"/?$"),"i")}}(t),s=e.replace(/(\?|#).*/,""),r=i.exec(s),n=i.test(s);return{active:n,t:n?o.reduce((t,e,i)=>Object.assign(Object.assign({},t),{[e]:r&&r[i+1]||""}),{}):{}}};var a;!function(t){t.i="ADD_ROUTE",t.o="NAVIGATE",t.s="SET_ACTIVE_ROUTE"}(a||(a={}));const l=t=>{var e;return e=t,window.history.pushState({},"",e),{type:a.o,path:t}},p={h:"/",l:{}},u=(t=p,{type:e="",path:i=""}={})=>{switch(e){case a.o:case a.s:return Object.assign(Object.assign({},t),{h:i,l:Object.keys(t.l).reduce((t,e)=>Object.assign(Object.assign({},t),{[e]:c(e,i)}),{})});case a.i:return Object.assign(Object.assign({},t),{l:Object.assign(Object.assign({},t.l),{[i]:c(i,t.h)})});default:return t}},v=({p:{l:t}},e)=>void 0!==e&&e in t?t[e]:void 0,d=(t,e)=>{var i;return void 0!==e?Boolean(null===(i=v(t,e))||void 0===i?void 0:i.active):(({p:{l:t}})=>Object.keys(t).reduce((e,i)=>e&&!t[i].active,!0))(t)};var f=function(t,e,i,o){var s,r=arguments.length,n=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(t,e,i,o);else for(var h=t.length-1;h>=0;h--)(s=t[h])&&(n=(r<3?s(n):r>3?s(e,i,n):s(e,i))||n);return r>3&&n&&Object.defineProperty(e,i,n),n};let O=!1;var b=c=>{let l=class extends(n(c)(t)){constructor(){super(...arguments),this.active=!1,this.t={},this.u=!1,this.v=!1}O(){O||(h(({pathname:t,search:e,hash:i})=>{const o=window.decodeURIComponent(t+e+i);c.j((t=>({type:a.s,path:t}))(o))}),O=!0);let t=this.parentElement,{path:e}=this;for(;t;){const i=t.closest("lit-route");i&&(e=`${i.path}${e}`),t=i&&i.parentElement}Boolean(this.querySelector("lit-route"))&&(e+=".*"),this.path=e,void 0!==this.path&&c.j((t=>({type:a.i,path:t}))(this.path))}m(t){const e=d(t,this.path),i=!this.active&&e;this.active=e,this.t=((t,e)=>{var i,o;return null!==(o=null===(i=v(t,e))||void 0===i?void 0:i.t)&&void 0!==o?o:{}})(t,this.path),this.active&&this.resolve&&(this.u=!0,this.resolve().then(()=>{this.u=!1}).catch(()=>{this.u=!1})),this.active&&!this.v&&(void 0!==this.R?i&&this.scrollIntoView(this.R):window.scrollTo(0,0))}$(t,i){const o=t.replace(/[^A-Za-z0-9-]/,"");let s="";i&&(s=Object.keys(i).map(t=>` ${t}="${this.t[t]}"`).join(""));return e`${r(`<${o}${s}></${o}>`)}`}g(){return this.active?this.resolve&&this.u?void 0===this.T?e``:this.$(this.T):void 0===this.A?e`<slot></slot>`:this.$(this.A,this.t):e``}};f([i({type:Boolean,B:!0})],l.prototype,"active",void 0),f([i({type:String})],l.prototype,"component",void 0),f([o()],l.prototype,"params",void 0),f([i({type:String})],l.prototype,"path",void 0),f([o()],l.prototype,"isResolving",void 0),f([i()],l.prototype,"resolve",void 0),f([i({type:String})],l.prototype,"loading",void 0),f([i({type:Object})],l.prototype,"scrollOpt",void 0),f([i({type:Boolean})],l.prototype,"scrollDisable",void 0),l=f([s("lit-route")],l)};const j=t=>{t.S({p:u}),b(t)};export{j as connectRouter,l as navigate};
//# sourceMappingURL=lit-redux-router.min.js.map
