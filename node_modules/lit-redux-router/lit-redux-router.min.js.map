{"version":3,"file":"lit-redux-router.min.js","sources":["lib/service.js","node_modules/regexparam/dist/regexparam.mjs","lib/actions.js","lib/reducer.js","lib/selectors.js","lib/route.js","lit-redux-router.js"],"sourcesContent":["import regexparam from 'regexparam';\nexport const refreshRoute = (route, activeRoute) => {\n    const { pattern, keys } = regexparam(route);\n    const noQueryRoute = activeRoute.replace(/(\\?|#).*/, '');\n    const match = pattern.exec(noQueryRoute);\n    const active = pattern.test(noQueryRoute);\n    return {\n        active,\n        params: !active\n            ? {}\n            : keys.reduce((list, item, index) => (Object.assign(Object.assign({}, list), { [item]: (match && match[index + 1]) || '' })), {}),\n    };\n};\nexport const checkNavigation = (route) => {\n    window.history.pushState({}, '', route);\n};\n//# sourceMappingURL=service.js.map","export default function (str, loose) {\n\tif (str instanceof RegExp) return { keys:false, pattern:str };\n\tvar c, o, tmp, ext, keys=[], pattern='', arr = str.split('/');\n\tarr[0] || arr.shift();\n\n\twhile (tmp = arr.shift()) {\n\t\tc = tmp[0];\n\t\tif (c === '*') {\n\t\t\tkeys.push('wild');\n\t\t\tpattern += '/(.*)';\n\t\t} else if (c === ':') {\n\t\t\to = tmp.indexOf('?', 1);\n\t\t\text = tmp.indexOf('.', 1);\n\t\t\tkeys.push( tmp.substring(1, !!~o ? o : !!~ext ? ext : tmp.length) );\n\t\t\tpattern += !!~o && !~ext ? '(?:/([^/]+?))?' : '/([^/]+?)';\n\t\t\tif (!!~ext) pattern += (!!~o ? '?' : '') + '\\\\' + tmp.substring(ext);\n\t\t} else {\n\t\t\tpattern += '/' + tmp;\n\t\t}\n\t}\n\n\treturn {\n\t\tkeys: keys,\n\t\tpattern: new RegExp('^' + pattern + (loose ? '(?=$|\\/)' : '\\/?$'), 'i')\n\t};\n}\n","import { checkNavigation } from './service';\n/* eslint-disable @typescript-eslint/naming-convention */\nexport var ActionTypes;\n(function (ActionTypes) {\n    ActionTypes[\"ADD_ROUTE\"] = \"ADD_ROUTE\";\n    ActionTypes[\"NAVIGATE\"] = \"NAVIGATE\";\n    ActionTypes[\"SET_ACTIVE_ROUTE\"] = \"SET_ACTIVE_ROUTE\";\n})(ActionTypes || (ActionTypes = {}));\nexport const addRoute = (path) => ({\n    type: ActionTypes.ADD_ROUTE,\n    path,\n});\nexport const navigate = (path) => {\n    checkNavigation(path);\n    return {\n        type: ActionTypes.NAVIGATE,\n        path,\n    };\n};\nexport const setActiveRoute = (path) => ({\n    type: ActionTypes.SET_ACTIVE_ROUTE,\n    path,\n});\n//# sourceMappingURL=actions.js.map","import { ActionTypes } from './actions';\nimport { refreshRoute } from './service';\nconst initialState = {\n    activeRoute: '/',\n    routes: {},\n};\nconst reducer = (state = initialState, { type = '', path = '' } = {}) => {\n    switch (type) {\n        case ActionTypes.NAVIGATE:\n        case ActionTypes.SET_ACTIVE_ROUTE:\n            return Object.assign(Object.assign({}, state), { activeRoute: path, routes: Object.keys(state.routes).reduce((routes, routeName) => (Object.assign(Object.assign({}, routes), { [routeName]: refreshRoute(routeName, path) })), {}) });\n        case ActionTypes.ADD_ROUTE:\n            return Object.assign(Object.assign({}, state), { routes: Object.assign(Object.assign({}, state.routes), { [path]: refreshRoute(path, state.activeRoute) }) });\n        default:\n            return state;\n    }\n};\nexport default reducer;\n//# sourceMappingURL=reducer.js.map","export const getRoute = ({ router: { routes } }, route) => typeof route !== 'undefined' && route in routes ? routes[route] : undefined;\nexport const noRouteActive = ({ router: { routes } }) => Object.keys(routes).reduce((noActive, route) => noActive && !routes[route].active, true);\nexport const isRouteActive = (state, route) => { var _a; return typeof route !== 'undefined' ? Boolean((_a = getRoute(state, route)) === null || _a === void 0 ? void 0 : _a.active) : noRouteActive(state); };\nexport const getRouteParams = (state, route) => { var _a, _b; return (_b = (_a = getRoute(state, route)) === null || _a === void 0 ? void 0 : _a.params) !== null && _b !== void 0 ? _b : {}; };\n//# sourceMappingURL=selectors.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { customElement, html, internalProperty, LitElement, property, } from 'lit-element';\nimport { unsafeHTML } from 'lit-html/directives/unsafe-html';\nimport { connect, installRouter } from 'pwa-helpers';\nimport { addRoute, setActiveRoute } from './actions';\nimport { getRouteParams, isRouteActive } from './selectors';\nlet routerInstalled = false;\n// eslint-disable-next-line import/no-mutable-exports, @typescript-eslint/no-explicit-any\nexport let RouteClass;\nexport default (store) => {\n    /**\n     * Element that renders its content or a component\n     * when browser route matches\n     * @element lit-route\n     * @demo ../demo/index.html\n     */\n    let Route = class Route extends connect(store)(LitElement) {\n        constructor() {\n            super(...arguments);\n            this.active = false;\n            this.params = {};\n            this.isResolving = false;\n            this.scrollDisable = false;\n        }\n        firstUpdated() {\n            if (!routerInstalled) {\n                installRouter(({ pathname, search, hash }) => {\n                    const path = window.decodeURIComponent(pathname + search + hash);\n                    store.dispatch(setActiveRoute(path));\n                });\n                routerInstalled = true;\n            }\n            let current = this.parentElement;\n            let { path } = this;\n            while (current) {\n                const closestLitRoute = current.closest('lit-route');\n                if (closestLitRoute) {\n                    path = `${closestLitRoute.path}${path}`;\n                }\n                current = closestLitRoute && closestLitRoute.parentElement;\n            }\n            const hasChildRoutes = Boolean(this.querySelector('lit-route'));\n            if (hasChildRoutes) {\n                path += '.*';\n            }\n            this.path = path;\n            if (typeof this.path !== 'undefined') {\n                store.dispatch(addRoute(this.path));\n            }\n        }\n        stateChanged(state) {\n            const isActive = isRouteActive(state, this.path);\n            const hasBecomeActive = !this.active && isActive;\n            this.active = isActive;\n            this.params = getRouteParams(state, this.path);\n            if (this.active && this.resolve) {\n                this.isResolving = true;\n                this.resolve()\n                    .then(() => {\n                    this.isResolving = false;\n                })\n                    .catch(() => {\n                    this.isResolving = false;\n                });\n            }\n            if (this.active && !this.scrollDisable) {\n                if (typeof this.scrollOpt !== 'undefined') {\n                    if (hasBecomeActive) {\n                        this.scrollIntoView(this.scrollOpt);\n                    }\n                }\n                else {\n                    window.scrollTo(0, 0);\n                }\n            }\n        }\n        getTemplate(component, attributesObject) {\n            const tagName = component.replace(/[^A-Za-z0-9-]/, '');\n            let attributes = '';\n            if (attributesObject) {\n                attributes = Object.keys(attributesObject)\n                    .map((param) => ` ${param}=\"${this.params[param]}\"`)\n                    .join('');\n            }\n            const template = `<${tagName}${attributes}></${tagName}>`;\n            return html `${unsafeHTML(template)}`;\n        }\n        render() {\n            if (!this.active) {\n                return html ``;\n            }\n            if (this.resolve && this.isResolving) {\n                return typeof this.loading === 'undefined' ? html `` : this.getTemplate(this.loading);\n            }\n            if (typeof this.component === 'undefined') {\n                return html `<slot></slot>`;\n            }\n            return this.getTemplate(this.component, this.params);\n        }\n    };\n    __decorate([\n        property({ type: Boolean, reflect: true })\n    ], Route.prototype, \"active\", void 0);\n    __decorate([\n        property({ type: String })\n    ], Route.prototype, \"component\", void 0);\n    __decorate([\n        internalProperty()\n    ], Route.prototype, \"params\", void 0);\n    __decorate([\n        property({ type: String })\n    ], Route.prototype, \"path\", void 0);\n    __decorate([\n        internalProperty()\n    ], Route.prototype, \"isResolving\", void 0);\n    __decorate([\n        property()\n    ], Route.prototype, \"resolve\", void 0);\n    __decorate([\n        property({ type: String })\n    ], Route.prototype, \"loading\", void 0);\n    __decorate([\n        property({ type: Object })\n    ], Route.prototype, \"scrollOpt\", void 0);\n    __decorate([\n        property({ type: Boolean })\n    ], Route.prototype, \"scrollDisable\", void 0);\n    Route = __decorate([\n        customElement('lit-route')\n    ], Route);\n    RouteClass = Route;\n};\n//# sourceMappingURL=route.js.map","import reducer from './lib/reducer';\nimport Route from './lib/route';\nexport const connectRouter = (store) => {\n    store.addReducers({ router: reducer });\n    Route(store);\n};\nexport { navigate } from './lib/actions';\n//# sourceMappingURL=lit-redux-router.js.map"],"names":["refreshRoute","route","activeRoute","pattern","keys","str","loose","RegExp","c","o","tmp","ext","arr","split","shift","push","indexOf","substring","length","regexparam","noQueryRoute","replace","match","exec","active","test","t","reduce","list","item","index","Object","assign","[object Object]","ActionTypes","navigate","path","window","history","pushState","type","NAVIGATE","initialState","h","l","reducer","state","SET_ACTIVE_ROUTE","routes","routeName","ADD_ROUTE","getRoute","p","undefined","isRouteActive","_a","Boolean","noActive","noRouteActive","__decorate","decorators","target","key","desc","d","arguments","r","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","routerInstalled","store","Route","connect","LitElement","super","this","params","isResolving","scrollDisable","installRouter","pathname","search","hash","decodeURIComponent","dispatch","setActiveRoute","current","parentElement","closestLitRoute","closest","querySelector","addRoute","isActive","hasBecomeActive","_b","getRouteParams","resolve","then","catch","scrollOpt","scrollIntoView","scrollTo","component","attributesObject","tagName","attributes","map","param","join","html","unsafeHTML","loading","getTemplate","property","B","prototype","String","internalProperty","customElement","connectRouter","addReducers"],"mappings":"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"}